const SendVote=function(){let n=document.querySelectorAll(".votes-container .votes i");for(let n of n)n.addEventListener("click",()=>{CheckIfUserShouldVote();const i=n.getAttribute("data-vote"),r=document.getElementById("recipe-id").value,u=document.querySelector("#antiForgeryForm input[name=__RequestVerificationToken]").value;let f={recipeId:r,value:i};const e={method:"post",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u},body:JSON.stringify(f)},o=await fetch("/api/Votes",e),t=await o.json();document.getElementById("avg-votes").textContent=t.averageVote.toFixed(1)+" / 5";document.getElementById("votes-count").textContent="Общо гласували: "+t.votesCount})},CheckIfUserShouldVote=function(){let n=document.querySelector(".paragraph-warning");if(n!=null&&n.textContent=="unregistered"){n.textContent="Само за регистрирани потребители!";n.style.display="block";let t=document.querySelector(".votes");t.style.display="none";let i=document.querySelector(".favorites");i.style.display="none"}};window.onload=SendVote();