const SendVote=function(){let n=document.querySelectorAll(".votes-container .votes i");for(let n of n)n.addEventListener("click",()=>{CheckIfUserShouldVote();const i=n.getAttribute("data-vote"),r=document.getElementById("recipe-id").value,u=document.querySelector("#antiForgeryForm input[name=__RequestVerificationToken]").value;let f={recipeId:r,value:i};const e={method:"post",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u},body:JSON.stringify(f)},o=await fetch("/api/Votes",e),t=await o.json();document.getElementById("avg-votes").textContent=t.averageVote.toFixed(1)+" / 5";document.getElementById("votes-count").textContent="Общо гласували: "+t.votesCount})},CheckIfUserShouldVote=function(){let n=document.querySelector(".paragraph-warning");if(n!=null&&n.textContent=="unregistered"){n.textContent="Само за регистрирани потребители!!!";n.style.display="block";let i=document.getElementById("first-star"),r=i.parentElement.parentElement,t=document.querySelector(".votes-container .favorites"),u=t.querySelector("i"),f=document.getElementById("favorites-p");r.style.display="none";t.removeChild(u);t.removeChild(f)}};window.onload=SendVote();const AddRecipeToUserFavorites=function(){const n=document.querySelector(".favorites"),t=n.querySelector("i");t.addEventListener("click",()=>{const n=document.querySelector(".favorites span"),t=document.getElementById("recipe-id").value,i=document.querySelector("#antiForgeryForm input[name=__RequestVerificationToken]").value;let r={recipeId:t};const u={method:"post",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":i},body:JSON.stringify(r)},f=await fetch("/api/Favorites",u),e=await f.json();n.textContent=e})};window.onload=AddRecipeToUserFavorites();const PaintWrapper=function(){const n=document.querySelector(".container-color"),t=n.parentElement;t.style.backgroundColor=n.value};window.onload=PaintWrapper();const AddClassesToStars=function(){const n=document.getElementById("avg-votes-hidden").textContent;let t=document.getElementById("first-star"),i=document.getElementById("second-star"),r=document.getElementById("third-star"),u=document.getElementById("fourth-star"),f=document.getElementById("fifth-star");switch(!0){case n>0&&n<1:t.setAttribute("class","fa-regular fa-star-half-stroke");break;case n==1:t.setAttribute("class","fa-solid fa-star");break;case n>1&&n<2:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-regular fa-star-half-stroke");break;case n==2:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-solid fa-star");break;case n>2&&n<3:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-solid fa-star");r.setAttribute("class","fa-regular fa-star-half-stroke");break;case n==3:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-solid fa-star");r.setAttribute("class","fa-solid fa-star");break;case n>3&&n<4:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-solid fa-star");r.setAttribute("class","fa-solid fa-star");u.setAttribute("class","fa-regular fa-star-half-stroke");break;case n==4:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-solid fa-star");r.setAttribute("class","fa-solid fa-star");u.setAttribute("class","fa-solid fa-star");break;case n>4&&n<5:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-solid fa-star");r.setAttribute("class","fa-solid fa-star");u.setAttribute("class","fa-solid fa-star");f.setAttribute("class","fa-regular fa-star-half-stroke");break;case n==5:t.setAttribute("class","fa-solid fa-star");i.setAttribute("class","fa-solid fa-star");r.setAttribute("class","fa-solid fa-star");u.setAttribute("class","fa-solid fa-star");f.setAttribute("class","fa-solid fa-star")}};window.onload=AddClassesToStars();const AddClassToHeart=function(){function i(){CheckIfUserCanAddRecipeToFavorites(n);let i=document.getElementById("is-recipe-favorite");i.textContent=="true"?(n.setAttribute("class","fa-regular fa-heart"),t.textContent="Добави в любими"):i.textContent=="false"&&(n.setAttribute("class","fa-solid fa-heart"),t.textContent="Премахни от любими")}let n=document.querySelector(".favorites i");n.addEventListener("click",i);let t=document.getElementById("favorites-p")},CheckIfUserCanAddRecipeToFavorites=function(n){let t=document.querySelector(".paragraph-warning");if(t!=null&&t.textContent=="unregistered"){t.textContent="Само за регистрирани потребители!!!";t.style.display="block";let r=document.querySelector(".votes ul"),u=document.querySelector(".votes-container .votes"),i=document.querySelector(".votes-container .favorites"),f=document.getElementById("favorites-p");u.removeChild(r);i.removeChild(n);i.removeChild(f)}};window.onload=AddClassToHeart();