@using Recipes.Common
@using Recipes.Web.ViewModels.Home;
@model IndexViewModel
@{
    this.ViewData["Title"] = "Рецепти";
}

@if (this.TempData["messageSended"] != null)
{
    <h1 class="text-center">Благодарим Ви, че се свързахте с нас!</h1>
    <h2 class="text-center">Очаквайте отговор на посочения от вас email адрес.</h2>
    <hr />
}

<h1 class="text-center index-heading">Последно добавени</h1>
<section class="recipes-list-container index-recipes">
    @foreach (var recipe in Model.RecentRecipes)
    {
        <article class="recipe-in-list-container">
            <a href="@recipe.Url">
                <article class="recipe-in-list-container-img">
                    <img src="@recipe.ImageUrl" class="img-fluid w-100">
                </article>
                <article class="recipe-in-list-container-name">
                    <p>@(recipe.Name.Length > 50 ? recipe.Name.Substring(0, 50) + "..." : recipe.Name)</p>
                </article>
                <input class="recipe-in-list-color" value="@recipe.CategoryColor" type="hidden" />
            </a>
        </article>
    }
</section>

<h1 class="text-center index-heading">Най-преглеждани</h1>
<section class="recipes-list-container index-recipes">
    @foreach (var recipe in Model.MostPopularRecipes)
    {
        <article class="recipe-in-list-container">
            <a href="@recipe.Url">
                <article class="recipe-in-list-container-img">
                    <img src="@recipe.ImageUrl" class="img-fluid w-100">
                </article>
                <article class="recipe-in-list-container-name">
                    <p>@(recipe.Name.Length > 50 ? recipe.Name.Substring(0, 50) + "..." : recipe.Name)</p>
                </article>
                <input class="recipe-in-list-color" value="@recipe.CategoryColor" type="hidden" />
            </a>
        </article>
    }
</section>

<h1 class="text-center index-heading">Най-коментирани</h1>
<section class="recipes-list-container index-recipes">
    @foreach (var recipe in Model.MostCommentedRecipes)
    {
        <article class="recipe-in-list-container">
            <a href="@recipe.Url">
                <article class="recipe-in-list-container-img">
                    <img src="@recipe.ImageUrl" class="img-fluid w-100">
                </article>
                <article class="recipe-in-list-container-name">
                    <p>@(recipe.Name.Length > 50 ? recipe.Name.Substring(0, 50) + "..." : recipe.Name)</p>
                </article>
                <input class="recipe-in-list-color" value="@recipe.CategoryColor" type="hidden" />
            </a>
        </article>
    }
</section>

<h1 class="text-center index-heading">Категории</h1>
<section class="categories-list-container">
    @foreach (var category in Model.Categories)
    {
        <section class="category-in-list-container">
            <a asp-controller="Categories" asp-action="ById" asp-route-categoryId="@category.Id">
                <article class="category-in-list-container-img">
                    <img src="@category.ImageUrl" class="img-fluid w-100">
                </article>
                <article class="category-in-list-container-name">
                    <p>@category.Name</p>
                </article>
                <input class="category-in-list-container-color" type="hidden" value="@category.Color">
            </a>
        </section>
    }
</section>

<table id="stats-table" class="table table-striped table-hover">
    <tbody>
        <tr>
            <td>Регистрирани потребители</td>
            <td>@Model.UsersCount</td>
        </tr>
        <tr>
            <td>Одобрени рецепти</td>
            <td>@Model.ApprovedRecipesCount</td>
        </tr>
        <tr>
            <td>Рецепти чакащи одобрение</td>
            <td>@Model.WaitingForApprovalRecipesCount</td>
        </tr>
        <tr>
            <td>Общо рецепти на сайта</td>
            <td>@(Model.ApprovedRecipesCount + Model.WaitingForApprovalRecipesCount)</td>
        </tr>
        <tr>
            <td>Общо коментари към рецепти</td>
            <td>@Model.CommentsForRecipesCount</td>
        </tr>
        <tr>
            <td>Категории</td>
            <td>@Model.CategoriesCount</td>
        </tr>
        <tr>
            <td>Съставки</td>
            <td>@Model.IngredientsCount</td>
        </tr>
        <tr>
            <td>Форум постове</td>
            <td>@Model.PostsCount</td>
        </tr>
        <tr>
            <td>Общо отговори към постове</td>
            <td>@Model.CommentsForPostsCount</td>
        </tr>
    </tbody>
</table>

@section Scripts {
    <script src="~/js/paintBorder.min.js" asp-append-version="true"></script>
}